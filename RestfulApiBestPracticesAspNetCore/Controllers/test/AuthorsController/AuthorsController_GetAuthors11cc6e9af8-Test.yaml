config:
  target: "https://example.com/api"
  phases:
    - duration: 60
      arrivalRate: 10

scenarios:
  - name: "Successful API request"
    flow:
      - get:
          url: "/authors"
          headers:
            Accept: "application/json"
          expect:
            - statusCode: 200
            - hasProperty: "totalCount"
            - hasProperty: "pageSize"
            - hasProperty: "currentPage"
            - hasProperty: "totalPages"

  - name: "API request with validation failure - Invalid OrderBy"
    flow:
      - get:
          url: "/authors?orderBy=invalidfield"
          headers:
            Accept: "application/json"
          expect:
            - statusCode: 400

  - name: "API request with validation failure - Invalid Fields"
    flow:
      - get:
          url: "/authors?fields=invalidfield"
          headers:
            Accept: "application/json"
          expect:
            - statusCode: 400

  - name: "API request with edge case - Large Page Size"
    flow:
      - get:
          url: "/authors?pageSize=1000"
          headers:
            Accept: "application/json"
          expect:
            - statusCode: 200
            - hasProperty: "totalCount"
            - hasProperty: "pageSize"
            - hasProperty: "currentPage"
            - hasProperty: "totalPages"

  - name: "API request with edge case - Special Characters in Fields"
    flow:
      - get:
          url: "/authors?fields=name%21%40%23%24%25%5E%26%2A%28%29"
          headers:
            Accept: "application/json"
          expect:
            - statusCode: 400